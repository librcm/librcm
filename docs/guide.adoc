[[guide]]
== User guide

=== Error handling

TODO:

- error codes
- error messages
- error flow
- exceptions


=== Memory managment

TODO

== Rules

- Write portable ANSI C89.
- `#include <stdbool.h>` is OK.
- Modules are single header files.
- Public domain for new code (use the [Unlicense]).
- Permissive license (BSD, MIT, or ISC) for modified third party code.
- No GPL.
- Format the code with `clang-format` (standardized `.clang-format`
  file).
- Write unit tests for the code with the
  https://github.com/silentbicycle/greatest[greatest] testing library.

=== Allowed defines

The number of defines used in reusable C modules must be kept to the
absolute minimum! Otherwise `#ifdef`-hell ensues.

List of allowed `#ifdef`-statements:

- `__ANDROID__`: Android.
- `__APPLE__`: Apple platform (MacOS _and_ iOS).
- `__linux__`: Linux (also defined on Android).
- `__FreeBSD__`: FreeBSD.
- `__OpenBSD__`: OpenBSD.
- `_MSC_VER`: The Visual Studio compiler is used. Defined as an
  integer literal that encodes the major and minor number elements of
  the compiler's version number.
- `NDEBUG`: combined with `#ifndef` to disable debugging code.
- `TARGET_OS_IOS`: Is `== 0` for Mac OS and `> 0` for iOS (on Apple
  platform).
- `_WIN32`: Windows (usually with `#ifndef` to implement POSIX first).

=== Coding style

- Error buffer: `char err[ERRBUF_SIZE]` (module `rcm_errbuf.h`)
- Return variables: `int rc`

=== Example module

TODO: `rcm_mod.h` example module.

== How to test

TODO:

- valgrind, clang, greatest
- assertions
- allowed types
- licensensing

=== Use ANSI C89

Stick to C89 with the following exceptions from C99:

- `#include <stdbool.h>` is allowed.

==== Rationale

Visual Studio has poor support for C99.

=== `goto` is not allowed
